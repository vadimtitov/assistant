
INSTALL="apt-get install"

echo "*** Updating the system ***"
sudo apt-get update
sudo apt-get upgrade

echo "*** Installing PCRE ***"
sudo $INSTALL libc6-dev
sudo $INSTALL libpcre3 libpcre3-dev

echo "*** Installing Python and Python Dev Kit ***"
sudo $INSTALL python-all-dev python3-all-dev
sudo $INSTALL python3.6
sudo $INSTALL python3.6-venv

echo "*** Installing g++ ***"
sudo $INSTALL g++

echo "*** Installing Pyaudio and dependencies***"
sudo $INSTALL python-pyaudio python3-pyaudio sox libatlas-base-dev
sudo $INSTALL portaudio19-dev

echo "*** Installing other dependencies***"
sudo $INSTALL xdotool mpg123 qdbus

echo "*** Installing Swig ***"
cd dependencies/swig-3.0.12
./configure --prefix=/usr
make -j 4
sudo make install
cd ..
cd ..

echo "*** Installing snowboy ***"
cd assistant/modules/snowboy/swig/Python3
make
cd ..
cd ..
mv swig/Python3/* .
mv Makefile swig/Python3/Makefile
mv snowboy-detect-swig.i swig/Python3/snowboy-detect-swig.i
cd ..
cd ..
cd ..

# create venv
python3.6 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

echo "*** Installation complete ***"
