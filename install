# install requirements
echo "Installing requirements..." 
sudo apt-get install python-pyaudio python3-pyaudio sox libpcre3 libpcre3-dev libatlas-base-dev &&
sudo apt-get install portaudio19-dev python-all-dev python3-all-dev libffi-dev xdotool &&
sudo apt-get install xdotool

# install swig
echo "Installing swig..."
wget -O swig-3.0.12.tar.gz https://downloads.sourceforge.net/project/swig/swig/swig-3.0.12/swig-3.0.12.tar.gz?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fswig%2Ffiles%2Fswig%2Fswig-3.0.12%2Fswig-3.0.12.tar.gz%2Fdownload&ts=1486782132&use_mirror=superb-sea2
 
tar xf swig-3.0.12.tar.gz
cd swig-3.0.12

./configure --prefix=/usr
make -j 4
sudo make install

cd ..
rm -rf swig-3.0.12
rm swig-3.0.12.tar.gz


# install snowboy
echo "Installing snowboy..."
cd assistant/modules/snowboy/swig/Python3
make
cd ..
cd ..
mv swig/Python3/* .
mv Makefile swig/Python3/Makefile
mv snowboy-detect-swig.i swig/Python3/snowboy-detect-swig.i
cd ..
cd ..
cd ..

# create and activate venv
echo "Creating virtual environment..."
pip3 install virtualenv 
python3 -m venv venv
source venv/bin/activate

echo "Installing Python dependencies..."
pip install -r requirements.txt

echo "'bash run.sh' to run the assistant."


